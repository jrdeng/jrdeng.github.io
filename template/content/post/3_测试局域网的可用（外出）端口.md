---
title: "测试局域网的可用（外出）端口"
date: 2018-09-30T15:05:37+08:00
slug: "3"
tags: [
    "技术",
]
---

由于某些特殊原因，公司对外出的端口进行了限制，基本上只允许最常用的几个（21，22，80，443等）。

这样的结果是，一些使用了自定义端口的网站 (https://example.com:8080) 就没办法访问了。

这样我在家里的NAS服务器上装的nextcloud需要维护管理的时候就不太方便了（因为电信默认禁止了80和443端口的访问，自建的NAS服务器只能用自定义端口）。

因为是自用，不可能让IT开绿灯，折中一下，只有找一个公司这边也开放的端口，然后就用这个端口来做NAS服务端口。

说干就干，找到一个监听了（几乎）所有端口的服务器： [http://portquiz.net](http://portquiz.net) （表示感谢！）

写个脚本跑一跑：

    #!/bin/bash

    output=available_ports.txt
    echo "" > $output

    for i in $(seq 1 65535); do
        echo "testing $i..."
        nc -zv portquiz.net $i 2>&1 | grep "succeeded" >> $output
    done

    echo
    echo "--= DONE =--"
    echo

一顿扫下来，发现开放的端口果然很少。。勉强找两个用起来。


<hr style="width: 100%"/>

<h1 style="font-size: 1.5em;color:#555;font-weight: bold;">Comments: (on <a href="https://github.com/jrdeng/jrdeng.github.io/issues/3">github issue)</a></h1>


<script src="https://utteranc.es/client.js"
        repo="jrdeng/jrdeng.github.io"
        issue-number="3"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
