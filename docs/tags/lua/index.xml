<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Lua on 无名的旅人</title>
    <link>https://wuming.me/tags/lua/</link>
    <description>Recent content in Lua on 无名的旅人</description>
    <generator>Hugo</generator>
    <language>zh-CN</language>
    <lastBuildDate>Fri, 30 Oct 2020 12:22:14 +0800</lastBuildDate>
    <atom:link href="https://wuming.me/tags/lua/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Lua 5.4.x CMakeLists.txt</title>
      <link>https://wuming.me/post/8/</link>
      <pubDate>Fri, 30 Oct 2020 12:22:14 +0800</pubDate>
      <guid>https://wuming.me/post/8/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cmake_minimum_required(VERSION 3.12)&#xD;&#xA;&#xD;&#xA;project(Lua)&#xD;&#xA;&#xD;&#xA;add_definitions(-DLUA_COMPAT_5_3)&#xD;&#xA;if(UNIX)&#xD;&#xA;    add_definitions(-DLUA_USE_LINUX)&#xD;&#xA;endif(UNIX)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;### force options&#xD;&#xA;if(WIN32)&#xD;&#xA;    add_compile_options(&amp;#34;$&amp;lt;$&amp;lt;C_COMPILER_ID:MSVC&amp;gt;:/utf-8&amp;gt;&amp;#34;)&#xD;&#xA;    add_compile_options(&amp;#34;$&amp;lt;$&amp;lt;CXX_COMPILER_ID:MSVC&amp;gt;:/utf-8&amp;gt;&amp;#34;)&#xD;&#xA;endif()&#xD;&#xA;&#xD;&#xA;# see https://www.lua.org/manual/5.4/readme.html#other&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;### build lib&#xD;&#xA;set(C_FILES lapi.c lcode.c lctype.c ldebug.c ldo.c ldump.c lfunc.c lgc.c llex.c lmem.c lobject.c lopcodes.c lparser.c lstate.c lstring.c ltable.c ltm.c lundump.c lvm.c lzio.c lauxlib.c lbaselib.c lcorolib.c ldblib.c liolib.c lmathlib.c loadlib.c loslib.c lstrlib.c ltablib.c lutf8lib.c linit.c)&#xD;&#xA;# prepend &amp;#39;src/&amp;#39;&#xD;&#xA;list(TRANSFORM C_FILES PREPEND &amp;#34;src/&amp;#34;)&#xD;&#xA;# in C++ style&#xD;&#xA;set_source_files_properties(${C_FILES} PROPERTIES LANGUAGE CXX)&#xD;&#xA;add_library(lua STATIC ${C_FILES})&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;### build interpreter&#xD;&#xA;set(C_FILES &amp;#34;src/lua.c&amp;#34;)&#xD;&#xA;set_source_files_properties(${C_FILES} PROPERTIES LANGUAGE CXX)&#xD;&#xA;add_executable(lua-interpreter ${C_FILES})&#xD;&#xA;target_link_libraries(lua-interpreter lua)&#xD;&#xA;if(UNIX)&#xD;&#xA;    target_link_libraries(lua-interpreter m dl)&#xD;&#xA;endif(UNIX)&#xD;&#xA;set_target_properties(lua-interpreter PROPERTIES OUTPUT_NAME lua)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;### build compiler&#xD;&#xA;set(C_FILES &amp;#34;src/luac.c&amp;#34;)&#xD;&#xA;set_source_files_properties(${C_FILES} PROPERTIES LANGUAGE CXX)&#xD;&#xA;add_executable(luac ${C_FILES})&#xD;&#xA;target_link_libraries(luac lua)&#xD;&#xA;if(UNIX)&#xD;&#xA;    target_link_libraries(luac m dl)&#xD;&#xA;endif(UNIX)&#xD;&#xA;&#xD;&#xA;# install target&#xD;&#xA;install(TARGETS lua&#xD;&#xA;    RUNTIME DESTINATION lib&#xD;&#xA;    LIBRARY DESTINATION lib&#xD;&#xA;    ARCHIVE DESTINATION lib&#xD;&#xA;)&#xD;&#xA;install(TARGETS lua-interpreter luac&#xD;&#xA;    RUNTIME DESTINATION bin&#xD;&#xA;)&#xD;&#xA;install(FILES src/lua.hpp src/lua.h src/lualib.h src/lauxlib.h src/luaconf.h&#xD;&#xA;    DESTINATION include&#xD;&#xA;)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;hr style=&#34;width: 100%&#34;/&gt;&#xA;&lt;h1 style=&#34;font-size: 1.5em;color:#555;font-weight: bold;&#34;&gt;Comments: (on &lt;a href=&#34;https://github.com/jrdeng/jrdeng.github.io/issues/8&#34;&gt;github issue)&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;script src=&#34;https://utteranc.es/client.js&#34;&#xA;        repo=&#34;jrdeng/jrdeng.github.io&#34;&#xA;        issue-number=&#34;8&#34;&#xA;        theme=&#34;github-light&#34;&#xA;        crossorigin=&#34;anonymous&#34;&#xA;        async&gt;&#xA;&lt;/script&gt;</description>
    </item>
  </channel>
</rss>
